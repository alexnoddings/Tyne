@page "/part-types"

<TynePageTitle Value="Part types" />

<MudContainer MaxWidth="MaxWidth.Large" Class="pt-6">
    <div class="d-flex flex-row px-3">
        <MudText Typo="Typo.h2">Part types</MudText>
        <MudButton OnClick="() => CreateDrawer.OpenAsync()"
                    StartIcon="@Icons.Material.Filled.Add"
                    Variant="Variant.Filled"
                    Size="Size.Large"
                    Color="Color.Primary"
                    Class="ms-auto my-auto px-4">
            New
        </MudButton>
    </div>
    <TyneTable @ref="Table"
               TRequest="SearchPartTypes.Request"
               TResponse="SearchPartTypes.Response"
               Dense="true"
               Hover="true"
               Striped="true">
        <TyneHeaderContent>
            <TyneStringColumn TRequest="SearchPartTypes.Request" TResponse="SearchPartTypes.Response" OrderBy="partType => partType.Name" For="partType => partType.Name" PersistAs="*" SyncAs="*">
                Name
            </TyneStringColumn>
            <TyneSelectColumn TRequest="SearchPartTypes.Request" TResponse="SearchPartTypes.Response" TValue="string" OrderBy="partType => partType.Name" For="partType => partType.Name" Type="TyneSelectColumnType.Radio" PersistAs="*" SyncAs="*">
                <ChildContent>
                    Name (select)
                </ChildContent>
                <Values>
                    <TyneSelectValue Value="@("Consumables")">Consumable parts</TyneSelectValue>
                    <TyneSelectValue Value="@("Electronics")">Electronics</TyneSelectValue>
                    <TyneSelectValue Value="@("Engines")">Engines</TyneSelectValue>
                    <TyneSelectValue Value="@("Other")">Other</TyneSelectValue>
                </Values>
            </TyneSelectColumn>
            <TyneMultiSelectColumn TRequest="SearchPartTypes.Request" TResponse="SearchPartTypes.Response" TValue="string" OrderBy="partType => partType.Name" For="partType => partType.Names" Type="TyneMultiSelectColumnType.Checkbox" PersistAs="*" SyncAs="*">
                <ChildContent>
                    Name (multi select)
                </ChildContent>
                <Values>
                    <TyneSelectValue Value="@("Consumables")">Consumable parts</TyneSelectValue>
                    <TyneSelectValue Value="@("Electronics")">Electronics</TyneSelectValue>
                    <TyneSelectValue Value="@("Engines")">Engines</TyneSelectValue>
                    <TyneSelectValue Value="@("Other")">Other</TyneSelectValue>
                </Values>
            </TyneMultiSelectColumn>
            <TyneDateRangeColumn TRequest="SearchPartTypes.Request" TResponse="SearchPartTypes.Response" OrderBy="partType => partType.CreatedAt" ForMin="partType => partType.CreatedAtMin" ForMax="partType => partType.CreatedAtMax">
                Created
            </TyneDateRangeColumn>
            <TyneDateRangeColumn TRequest="SearchPartTypes.Request" TResponse="SearchPartTypes.Response" OrderBy="partType => partType.LastUpdatedAt" ForMin="partType => partType.LastUpdatedAtMin" ForMax="partType => partType.LastUpdatedAtMax">
                Last updated
            </TyneDateRangeColumn>
            <MudTh>
            </MudTh>
        </TyneHeaderContent>
        <RowTemplate Context="PartType">
            <MudTd>
                @PartType.Name
            </MudTd>
            <MudTd>
                &lt;--
            </MudTd>
            <MudTd>
                &lt;--
            </MudTd>
            <MudTd>
                <ActionByAt AtUtc="PartType.CreatedAt" ByName="@PartType.CreatedByName" />
            </MudTd>
            <MudTd>
                <ActionByAt AtUtc="PartType.LastUpdatedAt" ByName="@PartType.LastUpdatedByName" />
            </MudTd>
            <MudTd>
                <div class="d-flex justify-end">
                    <MudButton OnClick="() => EditDrawer.OpenAsync(PartType.Id)"
                               Variant="Variant.Text"
                               Color="Color.Tertiary"
                               StartIcon="@Icons.Material.Filled.Edit">
                        Edit
                    </MudButton>
                </div>
            </MudTd>
        </RowTemplate>
        <NoRecordsContent>
            <MudText>No matching records found</MudText>
        </NoRecordsContent>
        <LoadingContent>
            <MudText>Loading...</MudText>
        </LoadingContent>
        <PagerContent>
            <MudTablePager />
        </PagerContent>
    </TyneTable>
</MudContainer>

<CreatePartTypeDrawer @ref="CreateDrawer" Table="Table" />
<EditPartTypeDrawer @ref="EditDrawer" Table="Table" />
