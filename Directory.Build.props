<Project>

  <PropertyGroup Label="Project Info">
    <Product>Tyne</Product>
    <Authors>Alex Noddings</Authors>
    <StrongNameKeyId>AlexNTyne</StrongNameKeyId>
    <PackageProjectUrl>https://github.com/alexnoddings/Tyne</PackageProjectUrl>
    <NeutralLanguage>en</NeutralLanguage>
    <DefaultLanguage>en-GB</DefaultLanguage>
  </PropertyGroup>

  <PropertyGroup Label="Project flags">
    <IsTestProject>false</IsTestProject>
    <IsTestProject Condition="$(MSBuildProjectName.EndsWith('Tests'))">true</IsTestProject>
    <IsPackable>true</IsPackable>
    <IsPackable Condition="$(IsTestProject)">false</IsPackable>
  </PropertyGroup>

  <PropertyGroup Label="Conventions">
    <LangVersion>preview</LangVersion>
    <Features>strict</Features>
    <Nullable>enable</Nullable>
    <ImplicitUsings>enable</ImplicitUsings>
    <AccelerateBuildsInVisualStudio>true</AccelerateBuildsInVisualStudio>
    <ArtifactsPath>$(MSBuildThisFileDirectory)artifacts</ArtifactsPath>
  </PropertyGroup>

  <PropertyGroup Label="Versioning">
    <TyneMajorVersion>3</TyneMajorVersion>
    <TyneMinorVersion>0</TyneMinorVersion>
    <TynePatchVersion>0</TynePatchVersion>
    <TynePreReleaseTag>alpha</TynePreReleaseTag>
    <Version>$(TyneMajorVersion).$(TyneMinorVersion).$(TynePatchVersion)</Version>
    <Version Condition=" '$(TynePreReleaseTag)' != '' ">$(Version)-$(TynePreReleaseTag)</Version>
    <AssemblyVersion>$(TyneMajorVersion).$(TyneMinorVersion).$(TynePatchVersion)</AssemblyVersion>
  </PropertyGroup>

  <PropertyGroup Label="Packaging" Condition="$(IsPackable)">
    <EmbedUntrackedSources>true</EmbedUntrackedSources>
    <IncludeSymbols>true</IncludeSymbols>
    <SymbolPackageFormat>snupkg</SymbolPackageFormat>
    <GenerateDocumentationFile>true</GenerateDocumentationFile>
  </PropertyGroup>

  <PropertyGroup Label="Repository info">
    <RepositoryUrl>https://github.com/alexnoddings/Tyne</RepositoryUrl>
    <RepositoryType>git</RepositoryType>
    <PublishRepositoryUrl>true</PublishRepositoryUrl>
    <PackageLicenseExpression>MIT</PackageLicenseExpression>
  </PropertyGroup>

  <PropertyGroup Label=".NET analysers">
    <EnableNETAnalyzers>true</EnableNETAnalyzers>
    <AnalysisLevel>latest</AnalysisLevel>
    <AnalysisMode>AllEnabledByDefault</AnalysisMode>
    <EnforceCodeStyleInBuild>true</EnforceCodeStyleInBuild>
  </PropertyGroup>

  <ItemGroup Label="Project analysers">
    <PackageReference Include="AsyncFixer" Version="1.6.0">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
    </PackageReference>
    <PackageReference Include="SonarAnalyzer.CSharp" Version="9.4.0.72892">
      <PrivateAssets>all</PrivateAssets>
      <IncludeAssets>runtime; build; native; contentfiles; analyzers</IncludeAssets>
    </PackageReference>
  </ItemGroup>

  <PropertyGroup Label="Warnings and errors">
    <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    <!--
      AsyncFixer01: The method does not need to use async/await.
                    While technically true, it can lead to uglier code and poor stack traces.
    -->
    <NoWarn>$(NoWarn);AsyncFixer01</NoWarn>
    <!--
      CS1591: Missing XML comment for publicly visible type or member.
              This should be removed once all public types have XML docs associated.

    -->
    <NoWarn>$(NoWarn);CS1591</NoWarn>
  </PropertyGroup>

  <ItemGroup Label="Embedded resources">
    <EmbeddedResource Include="**/*.restext">
      <LogicalName>$(AssemblyName).%(FileName).resources</LogicalName>
    </EmbeddedResource>
  </ItemGroup>

</Project>
